function SvgSchema(a,b){this.elem=a,this.selector=a.id?a.id:b.selector,this.selectorName=b.selector.substring(1),this.svg=b.svg,b.states&&(this.states=b.states,this.events=b.events,this.initState=b.initState,this.transitionTime=b.transitionTime,this.easing=b.easing,this.animations={},this.active={},this.matrix={},this.start={},this.nonToggleEvents=[],this.easingOptions={easein:mina.easein,easeout:mina.easeout,easeinout:mina.easeinout,linear:mina.linear,backin:mina.backin,backout:mina.backout,elastic:mina.elastic,bounce:mina.bounce})}function Transform(a,b){this.selector=b.selectorName,this.id=a.id,this.waitFor=a.waitFor,this.element=a.element,this.transitionTime=a.transitionTime,this.easing=a.easing,this.x=a.x,this.y=a.y,this.r=a.r,this.s=a.s,this.path=a.path,this.points=a.points,this.drawPath=a.drawPath,this.attr=a.attr,this.repeat=a.repeat,this.timeout=a.timeout,this.matrixElem=this.element.toCamelCase(),this.snapElem=this.setSnapElem(b.elem),this.callbacks=[]}var SnapStates=function(a){"use strict";var b,c=1,d={easing:mina.easeinout};a.easing=a.easing||d.easing,b=document.querySelectorAll(a.selector);var e=document.getElementById("svg-path");if(!e){var f=document.getElementsByTagName("head")[0];e=document.createElement("style"),e.id="svg-path",e.innerHTML="svg path { stroke-linecap: butt; }",f.appendChild(e)}new MutationObserver(function(d){var e=document.querySelectorAll(a.selector);b.length!=e.length&&(b=document.querySelectorAll(a.selector),animationStateMethods.loopThroughIcons(b,a,c))}).observe(document.body,{childList:!0,subtree:!0,attributes:!1}),0!==b.length&&animationStateMethods.loopThroughIcons(b,a,c)},animationStateMethods={loopThroughIcons:function(a,b,c){return[].forEach.call(a,function(d,e){var f=new SvgSchema(d,b);if(a.length>1&&d.className&&!f.duplicate&&(f.elem.id=f.selectorName+"_"+c,c++),f.svg){if(".svg"==f.svg.slice(-4)){var h=f.elem.id?Snap("#"+f.elem.id):Snap("."+f.selectorName);Snap.load(f.svg,function(a){f.elem.innerHTML||h.append(a),animationStateMethods.organizeStates(f)})}else f.elem.innerHTML=f.svg,animationStateMethods.organizeStates(f)}else animationStateMethods.organizeStates(f);if(f.states&&f.events instanceof Array)for(var e=0;e<f.events.length;e++){var i=animationStateMethods.setTriggerElement(e,f);animationStateMethods.setTriggerEvent(e,f,i)}})},organizeStates:function(a){var b=a.states;if(b){var c=a.elem,d=a.active,e=a.start,f=a.animations;a.setActiveStates();for(var g in b){var h=b[g];h&&h.length>0&&(this.transformsLoop(h,c,e,a,g),this.setStatesToAnimation(f,g,e,c,d),a.initState==g&&(d[g]=!0,f[g]()))}}},transformsLoop:function(a,b,c,d,e){c[e]=[];var f=[];a.forEach(function(a){var b=new Transform(a,d),g=d.matrix;if(g[b.matrixElem]||(g[b.matrixElem]={}),!b.id&&!b.waitFor)throw new Error("State transform is missing an id or waitFor");b.easing||(b.easing=d.easing),"string"==typeof b.easing&&(b.easing=d.easingOptions[b.easing]),d.transitionTime&&!b.transitionTime&&0!==b.transitionTime&&(b.transitionTime=d.transitionTime),b.animation=animationStateMethods.setTransformAnimation(b,g[b.matrixElem]),b.setAnimationTimout(),b.waitFor||c[e].push(b),f.push(b)}),f.forEach(function(a){a.setTotalAnimationTime(f).setCallbacks(f)})},setTransformAnimation:function(a,b){return function(c,d,e,f){setTimeout(function(){if(e[f]){a.transformString=a.setTransformString(b),a.waitingFor=a.callbacks.length;var g=a.setDrawPath(),h=a.setRepeat(c,d,e,f),i=a.setTransitionTime();a.snapElem.forEach(function(b){b.stop(),a.animateTransform(i,c,d,e,f,h,b).animatePath(a.path,i,b).animatePoints(a.points,i,b).animateDrawPath(g,i,b).animateAttr(a.attr,i,b)})}},a.timeout)}},setStatesToAnimation:function(a,b,c,d,e){a[b]=function(){c[b].forEach(function(a){a.animation(function(){},d,e,b)})}},setTriggerElement:function(a,b){var c=b.events[a],d=b.elem;c.selector||(c.selector=b.selector+"-animate");var e=animationStatesHelpers.closest(d,c.selector);if(e)d=e;else for(var f=animationStatesHelpers.getSiblings(d),g=c.selector.substring(1),h=0;h<f.length;h++){var i=f[h].id,j=f[h].className;if(-1!=i.indexOf(g)||-1!=j.indexOf(g)){d=f[h];break}}return d},setTriggerEvent:function(a,b,c){var d=b.events[a],e=b.active,f=b.animations,g=b.nonToggleEvents;d.inputType;d.state instanceof Array||g.push(d.state);var i=[];if(b.initState){var j=d.state.indexOf(b.initState);0!==j?(i=d.state.slice(j,j+1),i=i.concat(d.state.slice(0,1))):i=d.state}else i=d.state;c.addEventListener(d.event,function(a){if(d.state instanceof Array){var b=i[0],c=i[1];e[b]?(e[b]=!1,e[c]=!0,f[c]()):(e[b]=!0,e[c]=!1,f[b]())}else g.length>1?g.forEach(function(a){e[a]=a==d.state}):e[d.state]||(e[d.state]=!0),f[d.state]()})}};SvgSchema.prototype.setActiveStates=function(){var a=[],b=this.events,c=this.active,d=this.initState;for(var e in b)b[e].state instanceof Array?a=b[e].state:c[b[e].state]=!1;a.length>0&&a.forEach(function(b){d?c[b]=d==b:(c[a[0]]=!1,c[a[1]]=!0)})},Transform.prototype.setTransformString=function(a){void 0!==this.x&&(a.x=this.x),void 0!==this.y&&(a.y=this.y),void 0!==this.r&&(a.r=this.r),void 0!==this.s&&(a.s=this.s);var b;if(void 0!==a.x||void 0!==a.y||void 0!==a.r||void 0!==a.s){if(void 0!==a.r&&!(a.r instanceof Array)||void 0!==a.s&&!(a.s instanceof Array)){var c=this.snapElem[0].getBBox(1);void 0===a.r||a.r instanceof Array||(a.r=[a.r,c.cx,c.cy]),void 0===a.s||a.s instanceof Array||(a.s=[a.s,a.s,c.cx,c.cy])}b="t",b+=void 0!==a.x?a.x+",":"0,",b+=void 0!==a.y?a.y+",":"0,",b+=void 0!==a.r?"r"+a.r+",":"",b+=void 0!==a.s?"s"+a.s:""}return b},Transform.prototype.setDrawPath=function(){var a=this.drawPath;return void 0!==a&&(a instanceof Object&&(a=Math.floor(Math.random()*(a.max-a.min+1)+a.min)),a+=a<0?100:-100,a/=-100),a},Transform.prototype.setTransitionTime=function(){var b=this.transitionTime;return b instanceof Object?Math.floor(Math.random()*(b.max-b.min+1)+b.min):b},Transform.prototype.setSnapElem=function(a){var b;if(!(b=a.id?Snap.select("#"+a.id+" "+this.element):Snap.selectAll("."+this.selector+" "+this.element)))throw new Error("missing element in transform list: "+this.element);return void 0!==b.length&&(b=b.items),void 0===b.length&&(b=[b]),b},Transform.prototype.setRepeat=function(a,b,c,d){var e=this;return e.repeat?function(){e.repeat.loopDuration&&(e.repeat.times=Math.ceil(e.repeat.loopDuration/e.totalAnimationTime)-1),(void 0===e.repeat.repeated||isNaN(e.repeat.repeated))&&(e.repeat.repeated=e.repeat.times||1),e.repeat.repeated<=0?delete e.repeat.repeated:isNaN(e.repeat.repeated)||setTimeout(function(){e.animation(a,b,c,d),(!e.repeat.loop||e.repeat.loop&&e.repeat.loopDuration)&&e.repeat.repeated--},e.repeat.delay||0)}:null},Transform.prototype.animateTransform=function(a,b,c,d,e,f,g){var h=this;return g.animate({transform:h.transformString},a,this.easing,function(){0===h.callbacks.length&&b&&b(),h.callbacks.forEach(function(a){a(function(){0===--h.waitingFor&&(f&&f(),b&&b())},c,d,e)})}),this},Transform.prototype.animatePath=function(a,b,c){return void 0!==a&&c.animate({d:a},b,this.easing),this},Transform.prototype.animatePoints=function(a,b,c){if(void 0!==a){for(var d=c.attr("points"),e=[],f=0;f<d.length;f++){var g=parseInt(d[f]);isNaN(g)||currentPointsArray.push(g)}c.animate(e,a,function(a){c.attr({points:a})},b,this.easing)}return this},Transform.prototype.animateDrawPath=function(a,b,c){if(void 0!==a){var d=c.getTotalLength();c.attr({"stroke-dasharray":d+" "+d});parseInt(c.attr("stroke-dashoffset"))>d&&c.attr({"stroke-dashoffset":d}),c.animate({strokeDashoffset:d*a},b,this.easing)}return this},Transform.prototype.animateAttr=function(a,b,c){return void 0!==a&&a instanceof Object&&c.animate(a,b,this.easing),this},Transform.prototype.setAnimationTimout=function(){return this.id&&this.id instanceof Array&&(this.timeout=this.id[1],this.id=this.id[0]),this.waitFor&&this.waitFor instanceof Array&&(this.timeout=this.waitFor[1],this.waitFor=this.waitFor[0]),this},Transform.prototype.setTotalAnimationTime=function(a){var b=this;return b.repeat&&b.repeat.loopDuration&&(b.totalAnimationTime=b.transitionTime,a.forEach(function(a){b.id==a.waitFor&&(b.totalAnimationTime+=a.transitionTime)})),this},Transform.prototype.setCallbacks=function(a){var b=this;return b.id&&a.forEach(function(a){a.animation&&b.id==a.waitFor&&b.callbacks.push(a.animation)}),this},String.prototype.replaceAll=function(a,b){return this.split(a).join(b)},String.prototype.toCamelCase=function(){var a=this.replace(/([^a-zA-Z0-9_\- ])|^[_0-9]+/g,"").trim().toLowerCase();return a=a.replace(/([ -]+)([a-zA-Z0-9])/g,function(a,b,c){return c.toUpperCase()}),a=a.replace(/([0-9]+)([a-zA-Z])/g,function(a,b,c){return b+c.toUpperCase()})};var animationStatesHelpers={getChildren:function(a,b){for(var c=[];a;a=a.nextSibling)1==a.nodeType&&a!=b&&c.push(a);return c},getSiblings:function(a){return this.getChildren(a.parentNode.firstChild,a)},closest:function(a,b){var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){return"function"==typeof document.body[a]&&(c=a,!0)});for(var d;a;){if((d=a.parentElement)&&d[c](b))return d;a=d}return null}};